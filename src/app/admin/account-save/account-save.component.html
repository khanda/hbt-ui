<div class="row">
  <div class="col-xl-8 col-lg-8 col-md-12 col-sm-12">

    <form [formGroup]="accountForm" #accountFormDir="ngForm" (ngSubmit)="onSubmit()">

      <div class="form-group row">
        <label for="username" class="col-sm-3 col-md-4 col-xl-3  col-form-label text-right">
          Tên đăng nhập <span class="text-danger">&#042;</span>
        </label>
        <div class="col-sm-8">
          <input type="text"
                 class="form-control"
                 id="username"
                 name="username"
                 aria-describedby="Tên đăng nhập"
                 formControlName="userName"
                 required
                 [readonly]="mode != NEW"
                 [class.is-invalid]="userName.invalid && (userName.dirty || userName.touched)">
          <div *ngIf="userName.invalid && (userName.dirty || userName.touched)" class="invalid-feedback">
            <div *ngIf="userName.errors.required">
              <span> Thông tin này là bắt buộc.</span>
            </div>
            <div *ngIf="userName.errors.minlength">
              Cần nhiều hơn {{USERNAME_MIX}} kí tự
            </div>
            <div *ngIf="userName.errors.maxlength">
              Cần ít hơn {{USERNAME_MAX}} kí tự
            </div>
            <div *ngIf="userName.errors.invalidExp">
              Chỉ được nhập chữ cái, số, - và _
            </div>
          </div>
        </div>
      </div>

      <div formGroupName="passwords" class="my-exclude-invalid-form" *ngIf="mode==NEW">
        <div class="form-group row">
          <label for="password" class="col-sm-3 col-md-4  col-xl-3  col-form-label text-right">
            Mật khẩu <span class="text-danger">&#042;</span>
          </label>
          <div class="col-sm-8">
            <input type="password"
                   class="form-control"
                   id="password"
                   name="password"
                   formControlName="password"
                   required
                   [readonly]="mode == VIEW"
                   (keyup)="getPasswordValue($event.target.value)"
                   [class.is-invalid]="password.invalid && (password.dirty || password.touched)">

            <div *ngIf="password.invalid && (password.dirty || password.touched)" class="invalid-feedback">
              <div *ngIf="password.errors.required">
                <span> Thông tin này là bắt buộc.</span>
              </div>
              <div *ngIf="password.errors.minlength">
                Cần nhiều hơn {{PASSWORD_MIX}} kí tự
              </div>
              <div *ngIf="password.errors.maxlength">
                Cần ít hơn {{PASSWORD_MIX}} kí tự
              </div>
              <div *ngIf="password.errors.invalidExp">
                Chỉ được nhập chữ cái, số, - và _
              </div>
            </div>
          </div>
        </div>
        <div class="form-group row">
          <label for="passwordConfirm" class="col-sm-3 col-md-4 col-xl-3  col-form-label text-right">
            Nhập lại mật khẩu
            <span class="text-danger">&#042;</span>
          </label>
          <div class="col-sm-8">

            <input type="password"
                   class="form-control"
                   id="passwordConfirm"
                   name="passwordConfirm"
                   (keyup)="onChangeConfirmedPassword($event.target.value)"
                   formControlName="passwordConfirm"
                   required
                   [readonly]="mode == VIEW"
                   [class.is-invalid]="passwordConfirm.invalid && (passwordConfirm.dirty || passwordConfirm.touched)">

            <div *ngIf="passwordConfirm.invalid && (passwordConfirm.dirty || passwordConfirm.touched)"
                 class="invalid-feedback">
              <div *ngIf="passwordConfirm.errors.required">
                <span> Thông tin này là bắt buộc.</span>
              </div>
              <div *ngIf="passwordConfirm.errors.minlength">
                Cần nhiều hơn {{PASSWORD_MIX}} kí tự
              </div>
              <div *ngIf="passwordConfirm.errors.maxlength">
                Cần ít hơn {{PASSWORD_MIX}} kí tự
              </div>
              <div *ngIf="passwordConfirm.errors.invalidExp">
                Chỉ được nhập chữ cái, số, - và _
              </div>
            </div>

            <div *ngIf="showMessagePasswordNotMatch" class="invalid-feedback">
              <span> Mật khẩu không khớp</span>
            </div>
          </div>
        </div>
      </div>

      <!--role area-->
      <div class="form-group row">
        <label for="userRole" class="col-sm-3 col-md-4 col-xl-3  col-form-label text-right">Vai trò
          <span class="message-invalid">&#042;</span>
        </label>
        <div class="col-sm-8">
          <select class="custom-select form-control"
                  id="userRole" name="userRole"
                  formControlName="userRole"
                  required
                  (change)="onSelectRole($event.target.value)"
                  [class.is-invalid]="userRole.invalid && (userRole.dirty || userRole.touched)">
            <option *ngFor="let role of roleList; let index = index" [value]="role.id">{{role.name}}</option>
          </select>
          <div *ngIf="userRole.invalid && (userRole.dirty || userRole.touched)" class="invalid-feedback">
            <div *ngIf="userRole.errors.required">
              <span> Thông tin này là bắt buộc.</span>
            </div>
          </div>
        </div>
      </div>
      <!--role area-->

      <!--message area-->
      <div class="alert alert-danger" *ngIf="showMessageKey == ERROR">
        <span> Đã xảy ra lỗi </span>
      </div>
      <div class="alert alert-success" *ngIf="showMessageKey == SUCCESS">
        <span> Thành công  </span>
      </div>
      <!--message area-->

      <!--button action area-->
      <div class="form-group row">
        <label for="userRole" class="col-sm-3 col-md-4 col-xl-3  col-form-label text-right"></label>
        <div class="col-sm-8">
          <div class="button-form-action text-center">
            <button mat-raised-button type="button" (click)="onClickBack()">
              {{'button.back' | translate}}
            </button>
            <button mat-raised-button type="submit" color="primary"
                    *ngIf="mode!=VIEW"
                    [disabled]="showMessagePasswordNotMatch || !accountFormDir.form.touched || !accountFormDir.form.dirty || showMessageKey == SUCCESS || !accountFormDir.form.valid">
              {{'button.save' | translate}}
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>

